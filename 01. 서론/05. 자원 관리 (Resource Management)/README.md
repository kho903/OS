# 1.5 자원 관리 (Resource Management)
- 운영체제는 자원 관리자이다. 시스템의 CPU, 메모리 공간, 파일-저장 공간 및 I/O 장치는 관리해야 하는 자원에 속한다.

## 1.5.1 프로세스 관리 (Process Management)
- 프로그램은 CPU에 의해 명령이 실행되지 않으면 아무것도 할 수 없다. 실행 중인 프로그램은 프로세스다. 컴파일러와 같은 프로그램, PC에서 사용자가
실행하는 문서편집 프로그램 모두 프로세스이다. 모바일의 SNS 앱도 프로세스이다. 프로세스가 실행 중인 프로그램의 인스턴스로 생각할 수 있지만, 개념이
더 일반적이다. 프로세스는 동시에 실행할 하위 프로세스를 생성할 수 있도록 하는 시스템 콜을 제공하는 것이 가능하다.
- 프로세스는 작업을 수행하기 위해 CPU 시간, 메모리, 파일 및 I/O 장치를 포함한 여러 자원을 필요로 한다. 이러한 자원은 보통 실행되는 동안
할당된다. 프로세스가 생성될 때 획득하는 여러 가지 물리적 논리적인 자원 외에도 다양한 초기화 데이터(입력)가 전달될 수 있다. 예를 들어,
웹 페이지의 내용을 화면에 표시하는 기능을 가진 웹 브라우저를 실행하는 프로세스에서, URL을 입력으로 제공받으며 적절한 명령과 시스템 콜을
실행하여 원하는 정보를 얻고 화면에 표시한다. 프로세스가 종료되면 운영체제는 재사용 가능한 자원을 회수한다.
- 프로그램 그 자체는 프로세스가 아니라는 것을 알아야 한다. 프로그램은 디스크에 저장된 파일의 내용과 같이 수동적(passive) 개체지만, 프로세스는
다음 수행할 명령을 지정하는 프로그램 카운터(program counter)를 가진 능동적 (active) 개체이다. 한 프로세스의 수행은 반드시 순차적이어야
한다. CPU는 프로세스가 끝날 때까지 그 프로세스의 명령들을 차례대로 수행한다. 게다가, 어느 한순간에 최대 그 프로세스를 위해 하나의 명령만
수행된다. 따라서, 두 개의 프로세스가 동일한 프로그램과 연관되어 있더라도, 그들은 두 개의 별도의 수행 순서로 간주된다. 다중 스레드 프로세스는
여러 개의 프로그램 카운터를 가지고 있으며, 각각은 주어진 스레드에 대해 다음 실행할 명령어을 가리킨다.
- 프로세스는 시스템의 작업 단위이다. 시스템은 프로세스의 집합으로 구성되는데, 프로세스 중 일부는 운영체제 프로세스(시스템 코드를
수행하는 프로세스)이며, 나머지는 사용자 프로세스(사용자 코드를 실행하는 프로세스)이다. 모든 프로세스는 단일 CPU 코어에서 멀티플렉싱하거나,
여러 CPU 코어에서 병렬로 실행할 수 있다.
- 운영체제는 프로세스 관리와 관련하여 다음 활동을 담당한다.
  - 사용자 프로세스와 시스템 프로세스의 생성과 제거
  - CPU에 프로세스와 스레드 스케줄링
  - 프로세스의 일시 중지와 재개
  - 프로세스 동기화를 위한 기법 제공
  - 프로세스 통신을 위한 기법 제공

## 1.5.2 메모리 관리 (Memory Management) 
- 메인 메모리는 현재 컴퓨터 시스템 작동의 중심이다. 메인 메모리는 수십만에서 수십억에 이르는 크기의 큰 바이트 배열이다. 각 바이트는 고유의 주소를
가진다. 메인 메모리는 CPU 및 I/O 장치가 공유하는 빠른 접근이 가능한 데이터의 저장소이다. 폰 노이만 방식의 컴퓨터에서는 CPU가 명령어 인출
사이클 (instruction fetch-cycle)동안 메인 메모리로부터 명령어를 읽고, 자료 인출 사이클 (data fetch-cycle) 동안 메인 메모리로부터
데이터를 읽고 쓴다. 
- 메인 메모리는 일반적으로 CPU가 직접 주소를 지정할 수 있고, 직접 액세스할 수 있는 유일한 대용량 저장 장치이다. 예를 들어, CPU가 디스크에서
가져온 데이터를 처리하려면, 먼저 CPU에서 생성된 I/O 호출을 통해 먼저 해당 데이터를 메인 메모리로 전송해야 한다. 마찬가지로 CPU가 명령을
수행하기 위해서는 명령이 메모리 내에 있어야 한다.
- 프로그램이 실해되려면 반드시 절대 주소로 매핑(mapping)되고 메모리에 로드되어야 한다. 프로그램을 실행하면서, 이러한 절대 주소를 생성하여
메모리의 프로그램 명령어와 데이터에 접근한다. 결국 프로그램이 종료되고 메모리 공간이 사용 가능하다고 선언되며 다음 프로그램을 로드하여
실행할 수 있다.
- CPU 이용률과 사용자에 대한 컴퓨터의 응답 속도를 모두 향상시키기 위해 범용 컴퓨터는 메모리에 여러 프로그램을 유지해야 하며 이를 위해 메모리 관리 기법이 필요하다. 다양한 메모리
관리 기법이 있다. 이러한 기법은 메모리 관리에 대해 여러 접근 방법을 반영하는데, 알고리즘 효율성은 특정 상황마다 다르다. 특정 시스템에 대한 메모리 관리 기법의 선택은 여러 요인에
의해 결정되지만, 특히 시스템의 하드웨어 설계에 좌우된다. 각 알고리즘은 자체 하드웨어 지원이 필요하다.
- 운영체제는 메모리와 관련하여 다음 활동을 담당한다.
  - 메모리의 어느 부분이 현재 사용되고 있으며, 어느 프로세스에 의해 사용되고 있는지를 추적
  - 필요에 따라 메모리 공간을 할당하고 해제
  - 어떤 프로세스 (또는 그 일부)들을 메모리에 로드하고 제거할 것인가를 결정

## 1.5.3 파일 시스템 관리 (File-System Management)
- 컴퓨터 시스템의 편리한 사용을 위해 운영 체제는 정보 저장에 대한 균일한 논리적인 관점을 제공. 운영체제는 저장장치의 물리적 특성을 추상화하여 논리적 저장 단위인 파일을
정의. 운영체제는 파일을 물리적 미디어에 매핑하고, 저장장치를 통해 이들 파일에 접근.
- 파일 관리는 가장 눈에 띄는 운영체제 구성 요소. 컴퓨터는 여러 유형의 물리적 매체에 정보를 저장할 수 있다. 2차 저장장치가 가장 일반적이지만 3차 저장도 가능하다. 이러한 각 매체는
자신의 특성과 물리적 구성을 가지고 있다. 대부분의 매체는 디스크 드라이브와 같은 장치에 의해 제어되며, 이들 장치 또한 자신의 독특한 특성이 있다. 이러한 속성에는 접근 속도, 용량,
데이터 전송률, 접근 방식 (순차 접근 방식 또는 임의 접근 방식) 등
- 파일은 파일 생성자에 의해 정의된 관련 정보의 집합체. 일반적으로 파일은 프로그램 (소스와 목적 프로그램 형태)과 데이터를 나타냄.
- 데이터 파일은 숫자, 알파벳, 바이너리 등으로 구성된다. 파일은 텍스트 파일과 같은 자유 형태 또는 엄격하게 포맷된 형태 (mp3 음악 파일과 같이 고정된 필드)일 수 있다.
분명히 파일의 개념은 지극히 일반적.
- 운영 체제는 대량 저장 매체와 그것을 제어하는 장치를 관리함으로써 파일의 추상적인 개념을 구현한다. 또한 파일은 사용하기 쉽도록 디렉터리로 구성된다. 마지막으로 여러 사용자가
파일에 액세스할 수 있는 경우, 파일에 액세스할 수 있는 가용자와 해당 사용자가 파일에 액세스하는 방법 (예 : 읽기, 쓰기, 추가)을 통제하는 것이 바람직한다.
- 운영체제는 파일 관리를 위해 다음과 같은 일을 담당
  - 파일의 생성 및 삭제
  - 파일 구성을 위한 디렉터리 생성 및 삭제
  - 파일 및 디렉터리 조작을 위한 기본 지원
  - 대용량 저장장치에 (보조 저장 장치로) 파일 매핑
  - 안정적인 (비휘발성) 저장 매체에 파일 백업

## 1.5.4 대용량 저장장치 관리 (Mass-Storage Management)
- 컴퓨터 시스템은 메인 메모리를 백업하기 위해 보조 저장장치를 제공해야 한다. 대부분의 최신 컴퓨터 시스템은 HDD와 NVM 장치를 프로그램과 데이터에 대한 주요 온라인 저장매체로 사용한다.
대부분의 프로그램은 메모리에 로드될 때까지 이러한 장치에 저장된다. 그런 다음 프로그램은 장치를 처리 소스 및 대상으로 사용한다. 따라서 2차 저장소의 적절한 관리는 컴퓨터 시스템에서
가장 중요하다. 운영 체제는 보조저장장치 관리와 관련하여 다음 활동을 담당
  - 마운트 및 언마운팅
  - 여유 공간 (free-space)의 관리
  - 저장장소(storage) 할당
  - 디스크 스케줄링
  - 저장장치 분할 (파티셔닝)
  - 보호
- 보조저장장치는 매우 빈번하고 폭넓게 사용되므로, 효율적으로 사용해야 한다. 컴퓨터 전체 동작 속도는 보조저장장치 하위 시스템과 해당 하위 시스템을 조작하는 알고리즘에 따라 달라질
수 있다.
- 동시에 보조저장장치보다 더 느리고 비용은 적게 들고 높은 용랴으이 장치를 필요로 하는 경우가 많다. 디스크 데이터의 백업, 가끔 쓰이는 데이터 및 강기간 보존이 필요한 데이터를
저장하는 것이 대표적인 예. 자기 테이프 드라이브와 테이프, CD, DVD 및 Blu-ray 드라이브와 플래터는 일반적인 3차 저장장치.
- 3차 저장장치는 시스템 성능에 중요하지 않지만 운영체제에 의해 관리되어야만 한다. 일부 운영체제는 이 작업을 수행하는 반면, 다른 운영 체제는 3차 스토리지 관리를 응용 프로그램에게
맡기기도 한다. 운영 체제가 제공해야 할 기능에는 마운트와 언마운트 기능, 프로세스의 배타적 사용을 위한 장치의 할당과 반환 그리고 보조저장장치로부터 3차 저장장치로의 데이터 
마이그레이션 등이 있다.

## 1.5.5 캐시 관리 (Cache Management)
- 캐싱은 컴퓨터 시스템의 중요한 원리. 정보는 일반적으로 어떤 저장장치 (메인 메모리와 같은)에 보관됨. 정보가 사용됨에 따라, 더 빠른 장치인 캐시에 일시적으로 복사됨. 특정 정보가
필요할 때 먼저 캐시에 있는지 확인한다. 만약캐시에 있으면 그 정보를 캐시로부터 직접 사용하지만, 캐시에 없다면 메인 메모리 시스템으로 부터 그 정보를 가져와서 사용해야 하며, 이 때
이 정보가 다음에 곧 다시 사용할 확률이 높다면 복사본을 캐시에 넣는다.
- 또한 CPU 내부 프로그램 가능한 레지스터는 메인 메모리용 고속 캐시를 제공한다. 프로그래머 (또는 컴파일러)는 어느 정보를 메인 메모리에 두고, 어느 정보를 레지스터에 둘 것인지
결정하는 레지스터 할당 및 교체 알고리즘을 구현한다.
- 전적으로 하드웨어로 구현된 캐시도 존재. 예를 들어 대부분의 시스템에는 다음에 수행될 것으로 예상되는 명령을 보관하는 명령 캐시가 있다. 이 캐시가 없으면, CPU는 메인 메모리로부터
다음 명령을 인출해 올 동안 몇 사이클을 기다려야 한다. 비슷한 이유로 대부분의 시스템에는 메모리 계층에 하나 이상의 고속 데이터 캐시를 가지고 있다. 이들은 운영체제로 제어할 수 없다.
- 캐시 크기가 제한되어 있으므로 캐시 관리는 중요한 설계 문제다. 캐시 크기와 교체 정책을 신중하게 선택하면 성능이 크게 향상될 수 있다.
- 저장장치의 계층 구조에서 각 수준 간의 정보 이동은 하드웨어 설계 및 제어 운영 체제 소프트웨어에 따라 명시적 또는 묵시적으로 이루어진다. 예를 들어 캐시에서 CPU 및 레지스터로의
데이터 전송은 일반적으로 운영체제의 간섭 없이 하드웨어로만 이루어진다. 반면, 디스크와 메모리 간의 데이터 전송은 일반적으로 운영 체제에 의해 제어된다.
- 메모리의 계층 구조에서, 동일한 데이터가 서로 다른 수준의 저장장치 시스템에 나타나게 된다. 
  - 예를 들어 1씩 증가할 정수 A가 파일 B에 있고, 파일 B가 하드 디스크에 있다고 가정해보자.
  - 증가 작업은 먼저 A가 있는 디스크 블록을 메인 메모리에 복사하는 작업으로 이어진다.
  - 따라서 A의 복사본은 하드 디스크, 메인 메모리, 캐시 및 내부 레지스터와 같은 여러 위치에 나타난다. 
  - 내부 레지스터에서 증가가 발생하면 A 값은 다양한 저장장치 시스템에서 서로 달라진다.
  - A의 값은 하드 디스크에 새로운 A의 값이 다시 기록된 이후에야 비로소 같아진다.
- 어떤 시간안에 오직 하나의 프로세스만 실행하는 환경에서는, 이러한 기법이 아무 문제 없다. A에 대한 접근은 항상 계층 구조의 최상윗값만을 참조하기 때문이다.
- 그러나 CPU가 여러 프로세스 사이에서 이리저리 전환되는 멀티 태스킹 환경에서는, 여러 개의 프로세스가 A에 접근하기를 원할 경우 이들 각 프로세스가 가장 최근에 갱신된 A의 값을 
얻을 것을 보장하기 위해서 각별히 주의해야 한다.
- CPU가 내부 레지스터를 유지할 뿐만 아니라 로컬 캐시도 갖고 있는 멀티 프로세서 환경에서는 상황이 더욱 복잡해진다. 이런 환경에서 A의 복사본이 여러 캐시에 존재할 수 있다.
여러 개의 CPU가 모두 동시에 실행될 수 있으므로, 한 캐시에 있는 A 값이 갱신될 경우 A가 존재하는 모든 캐시에 즉각적으로 반영되어야 한다. 이러한 상황을 캐시 일관성 문제라고 하며,
일반적으로 (운영체제보다 아래 수준에서 처리되는) 하드웨어적 문제이다.
- 분산환경에서는 상황이 훨씬 더 복잡하다. 이 환경에서 동일한 파일의 여러 복사본을 다른 컴퓨터에 보관할 수 있다. 다양한 복제본에 동시에 액세스하여 업데이트 할 수 있으므로, 
일부 분산 시스템은 복제본을 한 곳에서 업데이트 할 때 다른 모든 복제본을 가능한 한 빨리 최신 상태로 유지하는 것을 보장한다. 이 보장을 달성하는 다양한 방법이 있다.

## 1.5.6 입출력 시스템 관리
- 운영체제의 목적 중의 하나는 사용자에게 특정 하드웨어 장치의 특성을 숨기는 것이다. 예를 들면, UNIX에서 입출력 장치의 특성은 입출력 하위 시스템에 의해 운영체제 자체에서 숨겨진다.
- 입출력 시스템은 다음과 같이 구성되어 있다.
  - 버퍼링, 캐싱, 스풀링을 포함한 메모리 관련 구성요소
  - 일반 장치 드라이버 인터페이스
  - 특정 하드웨어 장치용 드라이버
- 단지 장치 드라이버만이 자신에게 지정된 특정 장치의 특성을 알고 있다.



